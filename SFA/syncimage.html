<!DOCTYPE html>
<html>
<head>
  <title>
    Image Syncing
  </title>
 <meta name="viewport" content="width=device-width, initial-scale=1">
 <meta content="text/html;charset=UTF-8" http-equiv="Content-Type">
 <meta content="utf-8" http-equiv="encoding">

 <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.0/css/all.css">
 <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
 <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css"> 
 <link rel="stylesheet" type="text/css" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
 <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/1.10.19/css/dataTables.bootstrap.min.css">
 <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/buttons/1.5.6/css/buttons.dataTables.min.css">
 <link rel="stylesheet" type="text/css" href="css/clockface.css">
 <link rel="shortcut icon" href="/img/mdlogo_web.png" type="image/png">
 <link rel="stylesheet" href="/css/mdDesign.css"/>
 <link rel="stylesheet" href="/js/bootstrap-multiselect-master/dist/css/bootstrap-multiselect.css" type="text/css"/>
   
</head>
 <!--<div id="work-in-progress">
          <div style="margin: 0 auto;">
            <img src="img/fast.png" style="height: 80px; width: 480px; z-index: 1;"></br>
            <img src="img/orbit-400px.gif" style="position: block; height: 200px;">
          </div>
   </div>-->
<body>

 <div id="mySidenav" class="sidenav">
  <div class='image'><img alt='mdbuddylogo' class='logoMd' src='/img/mdbuddylogo_jeff.png'/></div>
    <a href="https://mybuddy-sfa.com/SFA/Dashboard"> <span class='glyphicon glyphicon-home'></span> Dashboard</a>
    <a href="https://mybuddy-sfa.com/SFA/digitalMapping"> <span class='glyphicon glyphicon-map-marker'></span> Digital Mapping</a>
    <a href="https://mybuddy-sfa.com/SFA/customerMapping"> <span class="fa fa-users" aria-hidden="true"></span> Customer Mapping</a>
    <a href="territoryGeofencing"> <span class="fa fa-unlock" aria-hidden="true"></span> Territory Geofencing</a>
   <a data-toggle="collapse" href="#collapse1" id='navDrop'> <span class='glyphicon glyphicon-duplicate' id='changeIcon'></span> Reports
    <i class="glyphicon glyphicon-menu-down pull-right"></i> </a>
      <div id="collapse1" class="panel-collapse collapse" style="margin-left: 17px; font-size: 9px !important">
        <a href="salesReport"> Sales Report</a>
        <a href="fastsosyotransaction"> Fastsosyo Transaction</a>
        <a href="transactionLedger"> Transaction Ledger</a>
        <a href="UnprocessedOrders"> Unprocessed Orders</a>
        <a href="dsr"> DSR</a>
        <a href="dcr"> Daily Collection</a>
        <a href="stockRequest"> Stock Request</a>
        <a href="unuploaded"> Unuploaded</a>
        <a href="BOReport"> BO</a>
        <a href="Stocktake Report"> Stocktake</a>
        <a href="inventory"> Inventory Valuation</a>
        <a href="jobberMaintenance"> Jobber</a>
        <a href="soaprvreport">SO Approval</a>
      </div>
   <a data-toggle="collapse" href="#collapse2" id='navDrop' class="maintenanceCont"> <span class="fa fa-cogs" aria-hidden="true" id='changeIcon'></span> Maintenance
    <i class="glyphicon glyphicon-menu-down pull-right"></i> </a>
      <div id="collapse2" class="panel-collapse collapse" style="margin-left: 17px; font-size: 9px !important">
        <a href="dataMaintenance" > Data</a>
        <a href="customer"> Customer</a>
        <a href="cmf">CMF</a>
        <a href="geoReset" > Georeset</a>
        <a href="salesman" class="activeYes"> Salesman</a>
        <a href="product"> Product</a>
        <a href="productbtdt"> BTDT Product</a>
        <a href="customerTagging"> Tagging</a>
        <a href="bankmaintenance"> Bank</a>
        <a href="mcpcalibration">MCP Calibration</a>
      </div>
  <!-- <a href="Alert"> <span class='glyphicon glyphicon-envelope'></span> Alert Messages</a> -->
  <hr />
  <a href="https://mybuddy-sfa.com/SFA/v2/dashboard">Switch to New Dashboard</a>
</div>

  <div id="main">
          <h4 class="display-4 dispMargin">
            <a href="#" id='navBtn' class="btn btn-primary"  style='margin-right: 15px;'>
             <span class="glyphicon glyphicon-menu-hamburger"></span> 
            </a>
             Salesman <small>v.2.1.15</small>
               <span class="nav navbar-nav navbar-right">
                  <li class="dropdown">
                      <a style='float:right;' href="#" class="dropdown-toggle" data-toggle="dropdown" id='dropThisDown'>
                          <span class="label label-pill label-danger count" style='border-radius: 10px; font-size: 10px;'></span>
                          <span class="fa fa-bell"></span>
                      </a>
                      <ul class="dropdown-menu" style='padding: 0'>
                        <div id='notif-body'>
                           <div id='notifs-icon-div'></div>
                        </div>
                        <a type="button" class="btn btn-default btn-block" href='mdAlert_bohol.php' id='seeAll' >See all</a>
                      </ul>
                  </li>
                   <li class="dropdown">
                      <a class="dropdown-toggle" data-toggle="dropdown" href="#">
                        <i class="fa fa-user-circle-o"></i>
                      </a>
                      <ul class="dropdown-menu dropdown-user">
                          <li><a href="Profile.html"><i class="fa fa-user-circle-o"></i> My Account</a>
                          </li>
                          <li class="divider"></li>
                          <li><a href="#" id="admin-logout-btn"><i class="fa fa-sign-out fa-fw"></i>Logout</a>
                          </li>
                      </ul>
                   </li>
                
              </span>
         </h4>

         <div class="panel cust-panel">
               <div class="panel-heading">
                    <i class='glyphicon glyphicon-cog'></i> <span id="titleHeading"></span>
               </div>
               <div class="panel-body" style='background-color:#fff; color: black;'> 
                  <div class="table-responsive">
                    <table class="table table-hover nowrap overridesList" style="width: 100%;">
                       <thead>
                        <tr>
                           <th>MD CODE</th>
                           <th>IMAGE</th>
                        </tr>
                      </thead>
                      <tbody>
                      </tbody>
                    </table>
                  </div>
               </div>
         </div><!--main panel end-->

           <!-- Modal -->
          <div class="modal fade" id="salesmanDetailsModal" data-backdrop="static" data-keyboard="false" role="dialog">
            <div class="modal-dialog">
              <div class="modal-content">
                <div class="modal-header headerMod">
                  <button type="button" class="close btnClose" data-dismiss="modal">&times;</button>
                  <h4 class="modal-title">SALESMAN DETAILS</h4>
                </div>
                <div class="modal-body salesmanMainModBody">
                  <div class="picCont">
                      <!-- <img class="s_Maintenace" onError="imgError(this)"/>
                      <div class="changeImageBtn">
                      <form id="fileForm" action="" method="post" enctype="multipart/form-data">
                        <input type="file" class="hidden" name="fileToUpload" id="fileToUpload" accept=".jpg"/>
                        <input type="hidden" id="imgMdCode" name="mdCode"/>
                        <input type="hidden" id="imgSite" name="site"/>
                        <input type="button" class="btn btn-primary btn-sm" value="UPDATE IMAGE" id="but_upload"><span class="btn btn-default btn-sm" id="uploadImg_BTN"><i class="fas fa-check"></i> SAVE</span><span class="btn btn-default btn-sm" id="cancelImg_BTN"><i class="fas fa-times"></i> CANCEL</span>
                      </form>
                      </div> -->
                      <table class="table table-condesed table-striped s_body_info_table">
                        <!--<tbody id="s_body_info"></tbody>-->
                        <tbody>
                          <tr>
                            <td>Name</td>
                            <td><strong id="name"></strong></td>
                          </tr>
                          <tr>
                            <td>Color</td>
                            <td><input type="color" name="" id="mdcolor" class="form-control"></td>
                          </tr>
                          <tr>
                           <td>Contact No.</td>
                           <td><input type="text" name="" id="contact" class="form-control"></td> 
                          </tr>
                          <tr>
                            <td>MD Password</td>
                            <TD><input type="text" name="" id="password" class="form-control"></TD>
                          </tr>
                          <!--<tr>
                            <td>Password1</td>
                            <TD><input type="text" name="" id="password1" class="form-control"></TD>
                          </tr>-->
                          <tr>
                            <td>MD Level</td>
                            <TD><input type="text" name="" id="mdlevel" class="form-control"></TD>
                          </tr>
                          <tr>
						              <tr>
                           <td>Call Time</td>
                           <td><input type="text" name="" id="calltime" class="form-control"></td> 
                          </tr>
                            <td>Cashier (Mobile #)</td>
                            <TD><input type="text" name="" id="eodnum1" class="form-control"></TD>
                          </tr>
                          <tr>
                            <td>Supervisor (Mobile #)</td>
                            <TD><input type="text" name="" id="eodnum2" class="form-control"></TD>
                          </tr>
                          <tr>
                            <td>Geolocking</td>
                            <TD><input type="text" name="" id="geolocking" class="form-control"></td>
                          </tr>
                          <tr>
                            <td>Price Code</td>
                            <td><input type="text" name="" id="priceCode" class="form-control"></td>
                          </tr>
                          <tr>
                              <td>Loading Capacity</td>
                              <td><input type="text" name="" id="capacityUpdate" class="form-control"></td>
                            </tr>
                          <tr>
                            <td>Default ORD Type</td>
                            <td><select id="defaultORDSelect" class="form-control">
                              <option value="T">TRUCK</option>
                              <option value="B">BOOKING</option>
                              <option value="X">BTDT</option>
                            </select></td>
                          </tr>
                          <tr>
                            <td>STK List Default</td>
                            <td><select id="stkListSelect" class="form-control">
                              <option value="MH">Musthave only</option>
                              <option value="MH+">Musthave w/ previous purchases</option>
                            </select></td>
                          </tr>
                          <tr>
                            <td>Minimun Stocktake SKU</td>
                            <td><input type="number" name="" id="minstksku" class="form-control"></td>
                          </tr>
                          <TR>
                            <td colspan="2">
                              <em style="color: #808080;">*value must be 0 - 99</em>
                            </td>
                          </TR>
                          <tr>
                            <td>Preroute CL</td>
                            <td><span class="text-indicator-preroute"></span>
                              <label class="switch pull-right"><input type="checkbox" class="preroutecheck">
                                <span class="slider round"></span>
                              </label></td>
                          </tr>
                          <tr>
                            <td>Postroute CL</td>
                            <td><span class="text-indicator-postroute"></span>
                              <label class="switch pull-right"><input type="checkbox" class="postroutecheck">
                                <span class="slider round"></span>
                              </label></td>
                          </tr>
                          <tr>
                            <td>Stocktake CL</td>
                            <td><span class="text-indicator-stocktake"></span>
                              <label class="switch pull-right"><input type="checkbox" class="stocktakecheck">
                                <span class="slider round"></span>
                              </label></td>
                          </tr>
                          <tr>
                            <td>EOD</td>
                            <td><span class="text-indicator-eod"></span>
                              <label class="switch pull-right"><input type="checkbox" class="eodcheck">
                                <span class="slider round"></span>
                              </label></td>
                          </tr>
					  		          <tr>
                            <td>Is Hybrid</td>
                            <td><span class="text-indicator-hybrid"></span>
                              <label class="switch pull-right"><input type="checkbox" class="ishybrid">
                                <span class="slider round"></span>
                              </label></td>
                          </tr>
                          <tr>
                            <td>Restrict New Customer</td>
                            <td><span class="text-indicator-newcustomer"></span>
                              <label class="switch pull-right"><input type="checkbox" class="newcustomer">
                                <span class="slider round"></span>
                              </label></td>
                          </tr>
                        </tbody>
                      </table>
                      <input type="hidden" name="" id="mdcodeholder">
                  </div>
                </div>
                <div class="modal-footer">
                  <button class="btn btn-primary" id="savaChangesBtn" onclick="saveDataChanges()">Save Changes</button>
                  <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                </div>
              </div>
            </div>
          </div>

          <div class="modal fade" id="addSalesmanModal" data-backdrop="static" data-keyboard="false" role="dialog">
            <div class="modal-dialog">
              <div class="modal-content">
                <div class="modal-header headerMod">
                  <button type="button" class="close btnClose" data-dismiss="modal">&times;</button>
                  <h4 class="modal-title">ADD NEW SALESMAN</h4>
                </div>
                <div class="modal-body salesmanMainModBody">
                  <div class="picCont">
                      <!--<img class="s_Maintenace" onError="imgError(this)"/>
                      <div class="changeImageBtn">
                      <form id="fileForm" action="" method="post" enctype="multipart/form-data">
                        <input type="file" class="hidden" name="fileToUpload" id="fileToUpload" accept=".jpg"/>
                        <input type="hidden" id="imgMdCode" name="mdCode"/>
                        <input type="hidden" id="imgSite" name="site"/>
                        <input type="button" class="btn btn-primary btn-sm" value="UPDATE IMAGE" id="but_upload"><span class="btn btn-default btn-sm" id="uploadImg_BTN"><i class="fas fa-check"></i> SAVE</span><span class="btn btn-default btn-sm" id="cancelImg_BTN"><i class="fas fa-times"></i> CANCEL</span>
                      </form>
                      </div>-->
                      <table class="table table-condesed table-striped s_body_info_table">
                        <!--<tbody id="s_body_info"></tbody>-->
                        <tbody>
                          <tr>
                            <td>Name</td>
                            <td>
                              <div style="margin: 0 auto; text-align: center;">
                                <span id="fetchCont" class="text-primary"><i class="fa fa-spin fa-spinner"></i> fetching data...</span>
                              </div>
                              <select id="mdNameH" class="form-control"></select>
                            </td>
                          </tr>
                          <tr>
                            <td>Password</td>
                            <td><input type="password" name="" id="passwordH" class="form-control"></td>
                          </tr>
                          <tr>
                            <td>Calltime</td>
                            <td><input type="text" name="" id="calltimeH" data-format="hh:mm A" class="form-control"></td>
                          </tr>
                          <tr>
                            <td>Price Code</td>
                            <td>
                              <select id="priceCodeH" class="form-control">
                              </select>
                            </td>
                          </tr>
                          <tr>
                            <td>Default Ord. Type</td>
                            <td>
                              <select id="defOrdTypeH" class="form-control">
                                <option value="" disabled selected hidden>Choose here..</option>
                                <option value="T">TRUCK</option>
                                <option value="B">BOOKING</option>
                                <option value="X">BTDT</option>
                              </select>
                            </td>
                          </tr>
                          <tr>
                              <td>Loading Capacity</td>
                              <td><input type="text" name="" id="capacityH" class="form-control"></td>
                            </tr>
                          <tr>
                            <td>Color</td>
                            <td><input type="color" name="" id="mdcolorH" class="form-control"></td>
                          </tr>
                          <tr>
                           <td>Contact No.</td>
                           <td><input type="text" name="" id="contactH" maxlength="12" class="form-control" placeholder="11 digit number format"></td> 
                          </tr>
                          <tr>
                           <td>Cashier (Mobile #)</td>
                           <td><input type="text" name="" id="eod1H" maxlength="12" class="form-control" placeholder="11 digit number format"></td> 
                          </tr>
                          <tr>
                           <td>Supervisor (Mobile #)</td>
                           <td><input type="text" name="" id="eod2H" maxlength="12" class="form-control" placeholder="11 digit number format"></td> 
                          </tr>
                        </tbody>
                      </table>
                      
                  </div>
                  
                </div>
                <div class="modal-footer">
                  <div class="alert alert-danger error" style="float: left; width: 300px;">
                    <strong><i class="fas fa-exclamation-circle"></i> Empty fields are not accepted!</strong>
                  </div>
                  <button class="btn btn-primary" id="saveBtn" onclick="exec_Save_Salesman()">Save</button>
                  <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                </div>
              </div>
            </div>
          </div>

          <div class="modal fade" id="duplicateUserModal" role="dialog">
            <div class="modal-dialog">
              <div class="modal-content">
                <div class="modal-header">
                  <h4 class="modal-title">SESSION ENDED</h4>
                </div>
                <div class="modal-body">
                  <p>Sorry, your session has been disconnected. Another user is currently using your account.</p>
                </div>
                <div class="modal-footer">
                  <button type="button" class="btn btn-primary" onclick="cofirmationDupUser()">GOT IT</button>
                </div>
              </div>
            </div>
            </div>
  </div><!--#main-->
 <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
 <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>

  <script type="text/javascript" src="https://cdn.datatables.net/1.10.19/js/jquery.dataTables.min.js"></script>
  <script type="text/javascript" src="https://cdn.datatables.net/1.10.19/js/dataTables.bootstrap.min.js "></script>
  <script type="text/javascript" src="https://cdn.datatables.net/responsive/2.2.3/js/dataTables.responsive.min.js"></script>
  <script src="https://cdn.datatables.net/buttons/1.3.1/js/dataTables.buttons.min.js"></script>
  <script src="https://cdn.datatables.net/buttons/1.3.1/js/buttons.print.min.js"></script>
  <script src="https://cdn.datatables.net/buttons/1.3.1/js/buttons.html5.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.1.3/jszip.min.js"></script>
  <script type="text/javascript" src="js/clockface.js"></script>
  <script type="text/javascript" src="/web/web-commons.js"></script>
  <script type="text/javascript" src="/js/bootbox.min.js"></script>
  <script type="text/javascript" src="/js/bootstrap-multiselect-master/dist/js/bootstrap-multiselect.js"></script>
  <!-- <script type="text/javascript" src="js/duplicate-user.js"></script> -->
  <script src="/HASH/md5.js"></script>
  <script src="/HASH/aes.js"></script>
  <script src="/nestle/connectionString/LOCALSTORAGE/storage.js"></script>
  <script src="js/chatApi.js"></script>
  <script type="text/javascript" language="javascript">

  var user = localStorage.getItem("adminUserName");

  getcompname();
  function getcompname(){
  $.ajax ({
      url: "/nestle/connectionString/applicationipAPI.php",
      type: "GET",
      data: {"type":"GET_COMPANYNAME", "CONN":con_info},
      dataType: "json",
      crossDomain: true,
      cache: false,            
        success: function(r){ 
        $('#titleHeading').html(r[0].company.toUpperCase());
        }
    });
  } 
 

 $(function(){
   $('#calltimeH').clockface();  
 });
 
 $('#navDrop').click(function() {
   $("i", this).toggleClass("glyphicon-menu-up glyphicon-menu-down");
  });

 $('.error').hide();
  
salesmanDataObject();
var sourceData;
function salesmanDataObject(){
    $.ajax ({
        url: "/nestle/connectionString/applicationipAPI.php",
        type: "GET",
        data: {"type":"GET_SALESMANIMAGE", "CONN":con_info},
        dataType: "json",
        crossDomain: true,
        cache: false,   
        async: false,         
        success: function(r){ 
            var cont = '';
            for(var x = 0; x < r.length; x++){
                concertImage(r[x].salesmanImage, r[x].mdCode)
            }
        },
        error: function(XMLHttpRequest, textStatus, errorThrown) {
            alert("ERROR OCCUR: " + XMLHttpRequest.responseText);
        }
    });
}

function concertImage(base64, mdCode){
    $.ajax ({
        url: "/upload/base64toJPGconvertion.php",
        type: "POST",
        data: {
                "base64Image":base64,
                "mdCode":mdCode
              },
        dataType: "json",
        crossDomain: true,
        cache: false,   
        async: false,         
        success: function(r){ 
            console.log('converted image: ' + r);
        }
        // ,error: function(XMLHttpRequest, textStatus, errorThrown) {
        //     alert("ERROR OCCUR: " + XMLHttpRequest.responseText);
        // }
    });
}

 function imgError2(image) {
   image.onerror = "";
   image.src = "../img/salesmanPic.jpg";
   return true;
 } 

function openNav() {
    document.getElementById("mySidenav").style.width = "270px";
    document.getElementById("main").style.marginLeft = "270px";
}

function closeNav() {
    document.getElementById("mySidenav").style.width = "0";
    document.getElementById("main").style.marginLeft= "0";
}
</script>
</body>
</html> 
