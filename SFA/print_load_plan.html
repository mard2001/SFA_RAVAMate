<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="shortcut icon" href="/img/mdlogo_web.png" type="image/png">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.5.0/css/all.css" integrity="sha384-B4dIYHKNBt8Bc12p+WXckhzcICo0wtJAoU8YZTY5qE0Id1GSseTk6S+L3BlXeVIU" crossorigin="anonymous">
    <title>Print Load Plan</title>

    <style>
        body{
            width: 90%;
            margin: 0 auto;
        }
        
        .maintable{
            width: 100%;
            text-align: center;
            border-collapse: collapse;
            font-size: 12px;
        }

        .maintable tr td{
            padding: 5px;
            border-top: solid 1px black;
            height: 30px;
            text-align: left;
            border: solid 1px;
        }

        .maintable thead tr th{
            height: 20px;
            text-align: center;
            border: solid 1px;
            /* background-color: #333;
            color: white; */
        }

        .printbtn{
            height: 40px;
            width: 130px;
            background-color: #03a5fc;
            color: white;
            padding: 10px;
            outline: none;
            border: none;
            cursor: pointer;
        }

        .printbtn:hover{
            transition: ease 0.2s;
            background-color: #03d3fc;
        }

        .forminput{
            border-top: none;
            border-left: none;
            border-right: none;
            width: 200px;
            text-align: center;
        }

        p{
            font-size: 12px !important;
        }
    </style>
</head>
<body class="bodymain">
    <div>

        <img class="logoprint" src="/img/mdlogo_web.png" style="float: left; height: 70px; width: 60px;" alt="">
        <button class="printbtn" style="float: right;" onclick="printsummary()">PRINT</button><br>
        <div class="header">
            <div style="margin: 0 auto; text-align: center;">
                <h4>LOAD PLAN</h4>
            </div>
            <div style="float: left;">
                <p style="text-align: left;">SITE: <strong id="siteHolder">---</strong></p>
                <p style="text-align: left;">UNLOADING DATE: <strong id="loadingdateholder">---</strong></p>
                <p style="text-align: left;">PLATE #: <strong id="platenoholder">---</strong></p>
            </div>
        </div>
        <br><br><br><br>
        <div class="mainbody">
            <table class="maintable">
                <thead>
                    <tr>
                        <th colspan="4">DESTINATION</th>
                        <th colspan="6">REFERENCE</th>
                    </tr>
                    <tr>
                        <th>#</th>
                        <th>CUSTOMER NAME</th>
                        <th>Contact #</th>
                        <th>ADDRESS</th>
                        <th>NO.</th>
                        <th>BOOKING DATE</th>
                        <th>LAPSE</th>
                        <th># SKU</th>
                        <th>AMOUNT</th>
                </thead>
                <tbody id="bodymain">

                </tbody>
                <tfoot>
                    <tr>
                        <td colspan="9" style="text-align: right;">
                           Total Amount: <strong id="totalAmountHolder"></strong>
                        </td>
                    </tr>
                </tfoot>
            </table>
        </div>
        <br><br><br><br>
        <div class="footer">
            <table style="width: 100%; border: none; margin: 0 auto; text-align: center;">
                <tbody>
                    <tr>
                        <td>
                            <div style="margin-right: 23%;">
                                <span>
                                    <input type="text" class="forminput" id="ack_dvname">
                                </span><br><br>
                                <small style="text-align: center; margin: 0 auto;">
                                    PREPARED BY
                                </small>
                            </div>
                        </td>
                        <td>
                            <div style="">
                                <span>
                                    <input type="text" class="forminput" id="ack_dvname">
                                </span><br><br>
                                <small style="text-align: center; margin: 0 auto;">
                                    NOTED BY
                                </small>
                            </div>
                        </td>
                        <td>
                            <div style="">
                                <div>
                                    <span>
                                        <input type="text" class="forminput">
                                    </span><br><br>
                                    <small style="text-align: center; margin: 0 auto;">
                                        APPROVED BY
                                    </small>
                                </div>
                            </div>
                        </td>
                    </tr>
                </tbody>
            </table>
            <!-- <div style="float: left; margin-right: 23%;">
                <span>
                    <input type="text" class="forminput" id="ack_dvname">
                </span><br><br>
                <small style="text-align: center; margin: 0 auto;">
                    ACKNOWLEDGED BY
                </small>
            </div>
            <div style="float: center;">
                <span>
                    <input type="text" class="forminput" id="ack_dvname">
                </span><br><br>
                <small style="text-align: center; margin: 0 auto;">
                    ACCOUNTANT NAME & SIGNATURE
                </small>
            </div>
            <div style="float: right;">
                <div>
                    <span>
                        <input type="text" class="forminput">
                    </span><br><br>
                    <small style="text-align: center; margin: 0 auto;">
                        NOTED BY
                    </small>
                </div>
            </div> -->
        </div>
    </div>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.1/jquery.min.js"></script>
    <script type="text/javascript" src="assets/js/wbcmmns.js"></script>

    <script src="v2/HASH/md5.js"></script>
    <script src="v2/HASH/aes.js"></script>
    <script src="/nestle/connectionString/LOCALSTORAGE/storage.js"></script>

    <script>
        var loadingdate = localStorage.getItem('LDNG_UNLOADINGDATE');
        var loading_cID = localStorage.getItem('LDNG_CID');
        var checker = 'normalinv';

        // if(siteID == 'IDLFUIPODMNC' || siteID == 'FDC_FLCPNG'){
        //     $('.fdconly').hide();
        //     $('#siteHolder').html('FAST UNIMERCHANTS INC.');
        // }else if(siteID == 'IDLFDLNDC'){
        //     $('.fdconly').hide();
        //     $('#siteHolder').html('FLC - SDC');
        // }else{
        //     $('.fdconly').show();
        //     $('#siteHolder').html(siteID);
        //     checker = 'fdcinv';
        // }

        $('#loadingdateholder').html(loadingdate);
        
        getcompname();
        function getcompname(){
        $.ajax ({
            url: GLOBALLINKAPI+"/connectionString/applicationipAPI.php",
            type: "POST",
            data: {"type":"GET_COMPANYNAME", "distCode": GBL_DISTCODE, "userID": GBL_USERID,},
            dataType: "json",
            crossDomain: true,
            cache: false,            
                success: function(r){ 
                    $('#siteHolder').html(r[0].company.toUpperCase());
                }
            });
        } 
        
        displaydata();
        function displaydata(){
            $.ajax ({
                url: GLOBALLINKAPI+"/connectionString/applicationipAPI.php",
                type: "POST",
                data: {
                        "type":"GET_DYNAMIC_ROUTE_PRINT_DETAILS",
                        'loading_cID':loading_cID,
                        "distCode": GBL_DISTCODE, 
                        "userID": GBL_USERID,
                    },
                dataType: "json",
                crossDomain: true,
                cache: false,   
                async: false,         
                success: function(res){ 
                    var cont = ``;

                    $('#platenoholder').html(res[0].DRIVERFULLNAME);
                    // $('#ack_dvname').val(r[0].FO_DETAILS[0].DRIVERD);
                    // $('#batchIDHolder').html(r[0].BATCHID);
                    // $('#loadingdateholder').html(r[0].FO_DETAILS[0].formt_loadingdate);

                    console.log(checker);
                    var totalf = 0.0;
                    for(var x = 0; x < res.length; x++){
                            cont += `
                                <tr>
                                    <td>`+(x+1)+`.</td>
                                    <td>`+res[x].CUSTOMERNAME+`</td>
                                    <td>`+res[x].CONTACTNUMBER+`</td>
                                    <td>`+res[x].ADDDRESS+`</td>
                                    <td style="text-align: center;">`+res[x].refno+`</td>
                                    <td style="text-align: center;">`+res[x].DELDATE+`</td>
                                    <td style="text-align: center;">`+res[x].DAYSLAPSE+`</td>
                                    <td></td>
                                    <td style="text-align: right;">`+res[x].totalAmountF+`</td>
                                </tr>        
                            `;

                            totalf += parseFloat(res[x].totalAmount);

                    }

                    // $('#platenoholder').html(res[0].VEHICLED);
                    $('#bodymain').html(cont);
                    $('#totalAmountHolder').html(totalf.toLocaleString());
                }
            });
        }

        function printsummary(){
            $('.printbtn').hide();
            $('.logoprint').hide();
            $('.maintable tr td').css({"font-size":"10px", "padding":"2px"});
            $('.maintable thead tr th').css({"font-size":"10px", "height":"10px"});
            
            window.print();
            $('.printbtn').show();
            $('.logoprint').show();
            $('.maintable tr td').css({"font-size":"12px", "padding":"5px"});
            $('.maintable thead tr th').css({"font-size":"12px", "height":"20px"});

        }
    </script>
</body>
</html>